<!DOCTYPE html>
<html lang="it">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Biglietto di Auguri per Francesca</title>
    <style>
      body {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
        font-family: "Georgia", serif;
        background: linear-gradient(
          135deg,
          #667eea 0%,
          #764ba2 50%,
          #f093fb 100%
        );
        min-height: 100vh;
        display: flex;
        justify-content: center;
        align-items: center;
        overflow: hidden;
      }

      .card-container {
        position: relative;
        width: 400px;
        height: 600px;
        perspective: 1000px;
        cursor: pointer;
      }

      .card {
        width: 100%;
        height: 100%;
        position: relative;
        transform-style: preserve-3d;
        transition: transform 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        border-radius: 20px;
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
      }

      .card.flipped {
        transform: rotateY(180deg);
      }

      .card-face {
        position: absolute;
        width: 100%;
        height: 100%;
        backface-visibility: hidden;
        border-radius: 20px;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        padding: 40px;
        box-sizing: border-box;
      }

      .card-front {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
      }

      .card-back {
        background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
        transform: rotateY(180deg);
        color: white;
      }

      .title {
        font-size: 2.5rem;
        font-weight: bold;
        margin-bottom: 20px;
        text-align: center;
        text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        animation: glow 2s ease-in-out infinite alternate;
      }

      @keyframes glow {
        from {
          text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3),
            0 0 10px rgba(255, 255, 255, 0.3);
        }
        to {
          text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3),
            0 0 20px rgba(255, 255, 255, 0.6);
        }
      }

      .name {
        font-size: 3rem;
        font-weight: bold;
        margin: 20px 0;
        text-align: center;
        background: linear-gradient(45deg, #fff, #ffd700);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        animation: sparkle 3s ease-in-out infinite;
      }

      @keyframes sparkle {
        0%,
        100% {
          transform: scale(1);
        }
        50% {
          transform: scale(1.05);
        }
      }

      .message {
        font-size: 1.2rem;
        text-align: center;
        line-height: 1.6;
        margin: 20px 0;
        opacity: 0;
        animation: fadeInUp 1s ease-out 0.5s forwards;
      }

      @keyframes fadeInUp {
        from {
          opacity: 0;
          transform: translateY(30px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .click-hint {
        position: absolute;
        bottom: 20px;
        left: 50%;
        transform: translateX(-50%);
        font-size: 0.9rem;
        opacity: 0.8;
        animation: pulse 2s infinite;
      }

      @keyframes pulse {
        0%,
        100% {
          opacity: 0.8;
        }
        50% {
          opacity: 0.4;
        }
      }

      .confetti-container {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        pointer-events: none;
        overflow: hidden;
        border-radius: 20px;
      }

      .confetti {
        position: absolute;
        width: 10px;
        height: 10px;
        opacity: 0;
      }

      .heart-decoration {
        position: absolute;
        font-size: 2rem;
        opacity: 0.3;
        animation: float 4s ease-in-out infinite;
      }

      .heart-1 {
        top: 10%;
        left: 10%;
        animation-delay: 0s;
      }
      .heart-2 {
        top: 20%;
        right: 15%;
        animation-delay: 1s;
      }
      .heart-3 {
        bottom: 15%;
        left: 20%;
        animation-delay: 2s;
      }
      .heart-4 {
        bottom: 25%;
        right: 10%;
        animation-delay: 3s;
      }

      @keyframes float {
        0%,
        100% {
          transform: translateY(0px) rotate(0deg);
        }
        50% {
          transform: translateY(-20px) rotate(10deg);
        }
      }

      .gift-icon {
        font-size: 4rem;
        margin: 20px 0;
        animation: bounce 2s infinite;
      }

      @keyframes bounce {
        0%,
        20%,
        50%,
        80%,
        100% {
          transform: translateY(0);
        }
        40% {
          transform: translateY(-20px);
        }
        60% {
          transform: translateY(-10px);
        }
      }
    </style>
  </head>
  <body>
    <div class="card-container" onclick="flipCard()">
      <div class="card" id="card">
        <div class="card-face card-front">
          <div class="heart-decoration heart-1">üíñ</div>
          <div class="heart-decoration heart-2">‚ú®</div>
          <div class="heart-decoration heart-3">üéà</div>
          <div class="heart-decoration heart-4">üåü</div>

          <div class="title">Happy Birthday</div>
          <div class="gift-icon">üéÅ</div>
          <div class="name">Franzi</div>
          <div class="click-hint">Clicca per aprire il biglietto ‚ú®</div>

          <div class="confetti-container" id="confetti-container"></div>
        </div>

        <div class="card-face card-back">
          <div class="message">
            <p>Che Taylor Jesus sia sempre con te ‚ú® <br /></p>
            <video width="380" height="450" autoplay muted playsinline>
              <source src="./franzi-hb.mp4" type="video/mp4" />
            </video>
          </div>
          <iframe
          id="youtubeVideo"
          width="0" 
          height="0"
          src="https://www.youtube.com/embed/nkmNsAyqi1I?start=40&controls=0&enablejsapi=1&autoplay=0"
          frameborder="0"
          allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
          allowfullscreen
        ></iframe>
                  <div class="click-hint">Clicca per chiudere</div>
        </div>
      </div>
    </div>

    <script>
      let isFlipped = false;
      let confettiActive = false;

      // function flipCard() {
      //   const card = document.getElementById("card");
      //   isFlipped = !isFlipped;

      //   if (isFlipped) {
      //     card.classList.add("flipped");
      //     if (!confettiActive) {
      //       createConfetti();
      //       confettiActive = true;
      //     }
      //   } else {
      //     card.classList.remove("flipped");
      //   }
      // }

      // let player; // variabile globale per il player YouTube

      // function flipCard() {
      //   const card = document.getElementById("card");
      //   isFlipped = !isFlipped;

      //   if (isFlipped) {
      //     card.classList.add("flipped");
      //     if (!confettiActive) {
      //       createConfetti();
      //       confettiActive = true;
      //     }
      //     if (player) player.playVideo(); // ‚ñ∂Ô∏è Avvia il video
      //   } else {
      //     card.classList.remove("flipped");
      //     if (player) player.pauseVideo(); // ‚è∏Ô∏è Ferma il video
      //   }
      // }

      // // YouTube API callback
      // function onYouTubeIframeAPIReady() {
      //   player = new YT.Player("youtubeVideo", {
      //     events: {
      //       onReady: (event) => {
      //         // Non fare nulla qui
      //       },
      //     },
      //   });
      // }

      // // Carica l'API JS di YouTube
      // const tag = document.createElement("script");
      // tag.src = "https://www.youtube.com/iframe_api";
      // document.head.appendChild(tag);

  // Carica l‚ÄôAPI di YouTube
  const tag = document.createElement("script");
  tag.src = "https://www.youtube.com/iframe_api";
  document.head.appendChild(tag);

  // Quando l‚ÄôAPI √® pronta, crea il player
  function onYouTubeIframeAPIReady() {
    player = new YT.Player("youtubeVideo");
  }

  function flipCard() {
    const card = document.getElementById("card");
    isFlipped = !isFlipped;

    if (isFlipped) {
      card.classList.add("flipped");
      if (player) {
        player.seekTo(0); // ‚è™ Riavvia il video dall‚Äôinizio
        player.playVideo(); // ‚ñ∂Ô∏è Avvia il video
      }
    } else {
      card.classList.remove("flipped");
      if (player) {
        player.pauseVideo(); // ‚è∏Ô∏è Ferma il video
        player.seekTo(0);    // ‚è™ Riporta all‚Äôinizio
      }
    }
  }



      function createConfetti() {
        const container = document.getElementById("confetti-container");
        const colors = [
          "#ff6b6b",
          "#4ecdc4",
          "#45b7d1",
          "#96ceb4",
          "#feca57",
          "#ff9ff3",
          "#54a0ff",
        ];

        for (let i = 0; i < 50; i++) {
          setTimeout(() => {
            const confetti = document.createElement("div");
            confetti.className = "confetti";
            confetti.style.left = Math.random() * 100 + "%";
            confetti.style.backgroundColor =
              colors[Math.floor(Math.random() * colors.length)];
            confetti.style.borderRadius = Math.random() > 0.5 ? "50%" : "0%";

            container.appendChild(confetti);

            // Animazione coriandoli
            confetti.animate(
              [
                {
                  transform: "translateY(-100px) rotate(0deg)",
                  opacity: 1,
                },
                {
                  transform: `translateY(700px) rotate(${
                    Math.random() * 360
                  }deg)`,
                  opacity: 0,
                },
              ],
              {
                duration: 3000 + Math.random() * 2000,
                easing: "cubic-bezier(0.25, 0.46, 0.45, 0.94)",
              }
            ).onfinish = () => {
              confetti.remove();
            };
          }, i * 100);
        }
      }

      // Animazione automatica iniziale
      setTimeout(() => {
        createConfetti();
      }, 1000);
    </script>
    <script>
      (function () {
        function c() {
          var b = a.contentDocument || a.contentWindow.document;
          if (b) {
            var d = b.createElement("script");
            d.innerHTML =
              "window.__CF$cv$params={r:'9862b0c27131edd7',t:'MTc1OTA1NjczNy4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";
            b.getElementsByTagName("head")[0].appendChild(d);
          }
        }
        if (document.body) {
          var a = document.createElement("iframe");
          a.height = 1;
          a.width = 1;
          a.style.position = "absolute";
          a.style.top = 0;
          a.style.left = 0;
          a.style.border = "none";
          a.style.visibility = "hidden";
          document.body.appendChild(a);
          if ("loading" !== document.readyState) c();
          else if (window.addEventListener)
            document.addEventListener("DOMContentLoaded", c);
          else {
            var e = document.onreadystatechange || function () {};
            document.onreadystatechange = function (b) {
              e(b);
              "loading" !== document.readyState &&
                ((document.onreadystatechange = e), c());
            };
          }
        }
      })();
    </script>
  </body>
</html>
